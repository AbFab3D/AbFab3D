importPackage(Packages.abfab3d.grid.op);
importPackage(Packages.abfab3d.grid);
importPackage(Packages.abfab3d.datasources);

function main(baseFile) {

	var grid = load(baseFile);      
	var intersect = new Intersection();
	intersect.addDataSource(new DataSourceGrid(grid, 255));
	intersect.addDataSource(new VolumePatterns.Gyroid(10*MM, 1*MM));

	maker.setDataSource(intersect);

	var dest = createGrid(grid);
	maker.makeGrid(dest);
	
	return grid;
}